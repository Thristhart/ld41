{"version":3,"sources":["../rbd/pnpm-volume/50417417-4282-49c9-ab43-b5448f9f2946/node_modules/.registry.npmjs.org/browser-pack/6.1.0/node_modules/browser-pack/_prelude.js","src/cards.js","src/constants.js","src/index.js","src/lib/audio.js","src/lib/camera.js","src/lib/cardgame.js","src/lib/city.js","src/lib/hand.js","src/lib/images.js","src/lib/renderer.js","src/lib/tile.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import CardGame from \"./lib/cardgame\";\n \nimport audio from \"./lib/audio\";\n\nimport City from \"./lib/city\";\n\nconst CARDS = {\n  gather1: {\n    title: \"Gather Material\",\n    desc: \"Add a Building Material to your pool.\",\n    cost: {},\n    img: \"https://cdn.glitch.com/50417417-4282-49c9-ab43-b5448f9f2946%2Flogs.jpg?1524348341380\",\n    onPlay: function(hand) {\n      console.log(\"gather!\", City, City.resources, City.resources.material);\n      City.resources.material += 1;\n    },\n    beforePlay: function(hand) {\n      audio.getMaterial();\n    },\n  },\n  buildWorkshop: {\n    title: \"Build Workshop\",\n    desc: `Builds a Workshop, a new Deck that will automatically play itself at the start of each turn.\n           This card will remove itself from your deck after playing.`,\n    cost: {material: 3},\n    img: \"https://cdn.glitch.com/50417417-4282-49c9-ab43-b5448f9f2946%2Fworkshop.jpg?1524348074572\",\n    onPlay: function(city, hand) {\n      // do the thing\n    },\n  }\n};\n\nexport default CARDS;","export const TILE_SIZE = 64;\nexport const CITY_WIDTH = 128;\nexport const CITY_HEIGHT = 128;","const canvas = document.getElementById(\"city\");\n\nfunction onResize() {\n  canvas.width = window.innerWidth;\n  canvas.height = window.innerHeight;\n}\n\nonResize();\n\nwindow.addEventListener(\"resize\", onResize);\n\ncanvas.addEventListener(\"contextmenu\", event => {\n  event.preventDefault();\n  return false;\n});\n\nimport Renderer from \"./lib/renderer\";\nimport City from \"./lib/city\";\nimport CardGame from \"./lib/cardgame\";\nimport CARDS from \"./cards\";\n\nwindow.debug = CardGame;\n\nconst renderer = new Renderer(canvas);\nCardGame.registerGlobalDragEvents();\n\nimport {TILE_SIZE, CITY_WIDTH, CITY_HEIGHT} from \"./constants\";\n\nrenderer.camera.x = TILE_SIZE * CITY_WIDTH / 2;\nrenderer.camera.y = TILE_SIZE * CITY_HEIGHT / 2;\n\nlet lastUpdateTime = null;\n\nfunction update(timestamp) {\n  requestAnimationFrame(update);\n  \n  if(lastUpdateTime === null) {\n    lastUpdateTime = timestamp;\n  }\n  \n  const dt = timestamp - lastUpdateTime;\n  \n  renderer.update(dt);\n  \n  lastUpdateTime = timestamp;\n}\n\nCardGame.createAndAddCardToHand(CARDS.gather1);\nCardGame.createAndAddCardToHand(CARDS.gather1);\nCardGame.createAndAddCardToHand(CARDS.gather1);\nCardGame.createAndAddCardToHand(CARDS.buildWorkshop);\n\nrequestAnimationFrame(update);","class AudioController {\n  constructor() {\n    this.cardSounds = {};\n    this.specificSounds = {};\n    \n    this.cardSounds.drawCard = this.loadAudio(\"https://cdn.glitch.com/50417417-4282-49c9-ab43-b5448f9f2946%2Fdraw%20card.wav?1524337162393\");\n    this.cardSounds.playCard = this.loadAudio(\"https://cdn.glitch.com/50417417-4282-49c9-ab43-b5448f9f2946%2Fcard%20from%20hand%20to%20play.wav?1524337150629\");\n    \n    this.specificSounds.material = this.loadAudio(\"https://cdn.glitch.com/50417417-4282-49c9-ab43-b5448f9f2946%2Fbuilding%20material.wav?1524352767755\");\n  }\n  loadAudio(url) {\n    let audio = document.createElement(\"audio\");\n    audio.src = url;\n    audio.volume = 0.5;\n    return audio;\n  }\n  playAudioFromStart(audio) {\n    audio.currentTime = 0;\n    audio.play();\n  }\n  drawCard() {\n    this.playAudioFromStart(this.cardSounds.drawCard);\n  }\n  playCard() {\n    this.playAudioFromStart(this.cardSounds.playCard);\n  }\n  getMaterial() {\n    this.playAudioFromStart(this.specificSounds.material);\n  }\n}\n\nlet audio = new AudioController();\n\nexport default audio;","class Camera {\n  constructor() {\n    this.x = 0;\n    this.y = 0;\n    this.scale = 1;\n  }\n  \n  get width() {\n    return window.innerWidth / this.scale;\n  }\n  get height() {\n    return window.innerHeight / this.scale;\n  }\n  \n  translateMousePosition(x, y) {\n    let translated = {x:x, y:y};\n    \n    translated.x = (x / this.scale) - ((window.innerWidth * 0.5) / this.scale);\n    translated.y = (y / this.scale) - ((window.innerHeight * 0.5) / this.scale);\n    \n    translated.x += this.x;\n    translated.y += this.y;\n    \n    return translated\n  }\n}\n\nexport default Camera;","const cardTemplate = document.getElementById(\"cardTemplate\");\n\nlet cardBeingDragged = null;\nlet dragOffsetX = null;\nlet dragOffsetY = null;\nlet dragStartX = null;\nlet dragStartY = null;\n\nimport Hand from \"./hand\";\nimport City from \"./city\";\nimport audio from \"./audio\";\n\nconst hand = new Hand(document.getElementById(\"hand\"));\n\nclass CardGame {\n  static createCard(cardData) {\n    let card = document.importNode(cardTemplate.content, true);\n    card.querySelector(\"h1\").innerHTML = cardData.title;\n    card.querySelector(\"p\").innerHTML = cardData.desc.replace(/\\n/g, \"<br>\");\n    for(let key in cardData.cost) {\n      let costSpan = document.createElement(\"span\");\n      costSpan.className = `cost ${key}`;\n      costSpan.innerHTML = cardData.cost[key];\n      card.querySelector(\".costs\").appendChild(costSpan);\n    }\n    card.querySelector(\"img\").src = cardData.img;\n\n    let cardElement = card.querySelector(\"card\");\n    cardElement.addEventListener(\"contextmenu\", event => {\n      event.preventDefault();\n      return false;\n    });\n    cardElement.addEventListener(\"mousedown\", event => {\n      if(cardBeingDragged && event.which !== 1) {\n        cardBeingDragged.style.transform = \"\";\n        delete(cardBeingDragged.dataset.droppable);\n        cardBeingDragged = null;\n        return;\n      }\n      const rect = cardElement.getBoundingClientRect();\n      const offsetX = event.clientX - rect.left;\n      const offsetY = event.clientY - rect.top;\n\n      cardBeingDragged = cardElement;\n      dragOffsetX = offsetX;\n      dragOffsetY = offsetY;\n\n      dragStartX = event.clientX;\n      dragStartY = event.clientY;\n      event.preventDefault();\n    });\n\n    cardElement.callback = function() {\n      if(cardData.onPlay) {\n        cardData.onPlay(hand);\n      }\n    };\n    \n    cardElement.beforePlayCallback = function() {\n      if(cardData.beforePlay) {\n        cardData.beforePlay(hand);\n      }\n    };\n\n    return card;\n  }\n  static async createAndAddCardToHand(cardData) {\n    let card = this.createCard(cardData);\n    return this.hand.addCard(card);\n  }\n  static registerGlobalDragEvents() {\n    document.body.addEventListener(\"mousemove\", event => {\n      if(!cardBeingDragged) {\n        return;\n      }\n      const rect = document.body.getBoundingClientRect();\n      const offsetX = event.clientX - rect.left;\n      const offsetY = event.clientY - rect.top;\n\n      let dx = offsetX - dragStartX;\n      let dy = offsetY - dragStartY;\n\n      let distance = Math.sqrt(dx * dx + dy * dy);\n\n      if(distance > cardBeingDragged.getBoundingClientRect().height / 3) {\n        cardBeingDragged.dataset.droppable = true;\n      }\n      else {\n        delete(cardBeingDragged.dataset.droppable);\n      }\n\n      cardBeingDragged.style.transform = `translate(${offsetX - dragStartX}px, ${offsetY - dragStartY}px)`;\n    });\n    document.body.addEventListener(\"mouseup\", event => {\n      if(cardBeingDragged) {\n        if(cardBeingDragged.dataset.droppable) {\n          this.playCard(cardBeingDragged, event.clientX, event.clientY);\n        }\n        else {\n          cardBeingDragged.style.transform = \"\";\n        }\n        delete(cardBeingDragged.dataset.droppable);\n        cardBeingDragged = null;\n      }\n    });\n  }\n  \n  static playCard(card, mouseX, mouseY) {\n    card.beforePlayCallback();\n    let position = card.getBoundingClientRect();\n    hand.removeCard(card);\n    card.classList.add(\"playAnim\");\n    document.body.appendChild(card);\n    card.style.transform = `translate(${mouseX - dragOffsetX}px, ${mouseY - dragOffsetY}px)`;\n    audio.playCard();\n    setTimeout(function() {\n      document.body.removeChild(card);\n      card.callback();\n    }, 400);\n  }\n}\n\nCardGame.hand = hand;\n\nexport default CardGame;","import Tile from \"./tile\";\nimport {CITY_WIDTH, CITY_HEIGHT} from \"../constants\";\n\nclass City {\n  static getTile(x, y) {\n    if(x < 0 || y < 0 || x >= this.tiles.length || y >= this.tiles[0].length) {\n      return null;\n    }\n    return this.tiles[x][y];\n  }\n}\n\nCity.tiles = [];\nfor(let x = 0; x < CITY_WIDTH; x++) {\n  City.tiles[x] = [];\n  for(let y = 0; y < CITY_HEIGHT; y++) {\n    City.tiles[x][y] = new Tile(x, y);\n  }\n}\n\nclass Resources {\n  static get materials() {\n    console.log(\"getter on materials\", this._materials);\n    return this._materials;\n  }\n  static set materials(newValue) {\n    console.log(\"setter on materials\", this._materials, newValue);\n    this._materials = newValue;\n    document.getElementById(\"materials\").innerHTML = newValue;\n  }\n  static get infrastructure() {\n    return this._infrastructure;\n  }\n  static set infrastructure(newValue) {\n    this._infrastructure = newValue;\n    document.getElementById(\"infrastructure\").innerHTML = newValue;\n  }\n  static get labour() {\n    return this._labour;\n  }\n  static set labour(newValue) {\n    this._labour = newValue;\n    document.getElementById(\"labour\").innerHTML = newValue;\n  }\n  static get knowledge() {\n    return this._knowledge;\n  }\n  static set knowledge(newValue) {\n    this._knowledge = newValue;\n    document.getElementById(\"knowledge\").innerHTML = newValue;\n  }\n  static get food() {\n    return this._food;\n  }\n  static set food(newValue) {\n    this._food = newValue;\n    document.getElementById(\"food\").innerHTML = newValue;\n  }\n}\n\nResources.materials = 0;\nResources.infrastructure = 0;\nResources.labour = 0;\nResources.knowledge = 0;\nResources.food = 0;\n\nCity.resources = Resources;\n\nwindow.testCity = City;\n\nexport default City;","const handElement = document.getElementById(\"hand\");\n\nimport audio from \"./audio\";\n\nclass Hand {\n  constructor(container) {\n    this.container = container;\n    this.firstCard = null;\n  }\n  \n  async addCard(card) {\n    let cardElem = card.querySelector(\"card\");\n    \n    if(!this.firstCard) {\n      this.firstCard = cardElem;\n    }\n    \n    this.container.appendChild(card);\n    \n    let amountOfCardsInHand = handElement.querySelectorAll(\"card\").length;\n    this.container.dataset.cardcount = amountOfCardsInHand;\n    if(amountOfCardsInHand > 6) {\n      this.burnFirstCard();\n    }\n    \n    audio.drawCard();\n    \n    cardElem.classList.add(\"enterHandAnim\");\n    await new Promise(resolve => {\n      cardElem.addEventListener(\"animationend\", function(event) {\n        if(event.animationName === \"addCardToHandAnimation\") {\n          resolve();\n        }\n      });\n    });\n    cardElem.classList.remove(\"enterHandAnim\");\n    \n  }\n  \n  async burnFirstCard() {\n    return this.burnCard(this.firstCard);\n  }\n  \n  findNewFirstCard() {\n    this.firstCard = null;\n    for(let i = 0; i < this.container.children.length; i++) {\n      let possible = this.container.children[i];\n      if(possible.classList.contains(\"burnCardAnim\")) {\n        continue;\n      }\n      this.firstCard = possible;\n      break;\n    }\n  }\n  \n  async burnCard(card) {\n    card.classList.add(\"burnCardAnim\");\n    if(this.firstCard === card) {\n      this.findNewFirstCard();\n    }\n    await new Promise(resolve => {\n      card.addEventListener(\"animationend\", function(event) {\n        if(event.animationName === \"burnCardAnimation\") {\n          resolve();\n        }\n      });\n    });\n    card.classList.remove(\"burnCardAnim\");\n    return this.removeCard(card);\n  }\n\n  removeCard(card) {\n    if(this.firstCard === card) {\n      this.findNewFirstCard();\n    }\n    this.container.removeChild(card);\n    const amountOfCardsInHand = handElement.querySelectorAll(\"card\").length;\n    this.container.dataset.cardcount = amountOfCardsInHand;\n  }\n}\n\nexport default Hand;","function loadImage(src) {\n  let image = new Image();\n  image.src = src;\n  return image;\n}\nconst IMAGES = {\n  SAND1: new loadImage(\"https://cdn.glitch.com/50417417-4282-49c9-ab43-b5448f9f2946%2FtileSand1.png?1524279136594\"),\n  SAND2: new loadImage(\"https://cdn.glitch.com/50417417-4282-49c9-ab43-b5448f9f2946%2FtileSand2.png?1524279136824\"),\n  GRASS1: new loadImage(\"https://cdn.glitch.com/50417417-4282-49c9-ab43-b5448f9f2946%2FtileGrass1.png?1524279339317\"),\n  GRASS2: new loadImage(\"https://cdn.glitch.com/50417417-4282-49c9-ab43-b5448f9f2946%2FtileGrass2.png?1524279136388\"),\n};\n\nexport default IMAGES;","import Camera from './camera';\nimport City from \"./city\";\n\nimport {TILE_SIZE} from \"../constants\";\n\nimport Images from \"./images\";\n\nclass Renderer {\n  constructor(canvas) {\n    this.canvas = canvas;\n    this.context = this.canvas.getContext(\"2d\");\n    this.context.imageSmoothingEnabled = false;\n    this.context.mozImageSmoothingEnabled = false;\n    this.context.webkitImageSmoothingEnabled = false;\n    this.context.msImageSmoothingEnabled = false;\n    this.context.imageSmoothingEnabled = false;\n    this.camera = new Camera();\n  }\n  \n  update(dt) {\n    this.context.save();\n    \n    this.context.translate(this.canvas.width / 2 - this.camera.x * this.camera.scale,\n                           this.canvas.height / 2 - this.camera.y * this.camera.scale);\n    this.context.scale(this.camera.scale, this.camera.scale);\n    \n    let leftBound = this.camera.x - this.camera.width / 2;\n    let rightBound = this.camera.x + this.camera.width / 2;\n    \n    let topBound = this.camera.y - this.camera.height / 2;\n    let bottomBound = this.camera.y + this.camera.height / 2;\n    \n    let leftCityBound = Math.floor(leftBound / TILE_SIZE);\n    let rightCityBound = Math.ceil(rightBound / TILE_SIZE);\n    \n    let topCityBound = Math.floor(topBound / TILE_SIZE);\n    let bottomCityBound = Math.ceil(bottomBound / TILE_SIZE);\n    \n    this.context.clearRect(this.camera.x - this.camera.width / 2, this.camera.y - this.camera.height / 2, this.camera.width, this.camera.height);\n    \n    for(let x = leftCityBound; x < rightCityBound; x++) {\n      for(let y = topCityBound; y < bottomCityBound; y++) {\n        let tile = City.getTile(x, y);\n        if(tile) {\n          this.context.drawImage(Images.GRASS1, x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);\n        }\n      }\n    }\n    \n    this.context.restore();\n  }\n}\n\nexport default Renderer;","class Tile {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n    this.type = \"grass\";\n  }\n}\n\nexport default Tile;"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3JiZC9wbnBtLXZvbHVtZS81MDQxNzQxNy00MjgyLTQ5YzktYWI0My1iNTQ0OGY5ZjI5NDYvbm9kZV9tb2R1bGVzLy5yZWdpc3RyeS5ucG1qcy5vcmcvYnJvd3Nlci1wYWNrLzYuMS4wL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvY2FyZHMuanMiLCJzcmMvY29uc3RhbnRzLmpzIiwic3JjL2luZGV4LmpzIiwic3JjL2xpYi9hdWRpby5qcyIsInNyYy9saWIvY2FtZXJhLmpzIiwic3JjL2xpYi9jYXJkZ2FtZS5qcyIsInNyYy9saWIvY2l0eS5qcyIsInNyYy9saWIvaGFuZC5qcyIsInNyYy9saWIvaW1hZ2VzLmpzIiwic3JjL2xpYi9yZW5kZXJlci5qcyIsInNyYy9saWIvdGlsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztBQ0FBOzs7O0FBRUE7Ozs7QUFFQTs7Ozs7O0FBRUEsSUFBTSxRQUFRO0FBQ1osV0FBUztBQUNQLFdBQU8saUJBREE7QUFFUCxVQUFNLHVDQUZDO0FBR1AsVUFBTSxFQUhDO0FBSVAsU0FBSyxzRkFKRTtBQUtQLFlBQVEsZ0JBQVMsSUFBVCxFQUFlO0FBQ3JCLGNBQVEsR0FBUixDQUFZLFNBQVosa0JBQTZCLGVBQUssU0FBbEMsRUFBNkMsZUFBSyxTQUFMLENBQWUsUUFBNUQ7QUFDQSxxQkFBSyxTQUFMLENBQWUsUUFBZixJQUEyQixDQUEzQjtBQUNELEtBUk07QUFTUCxnQkFBWSxvQkFBUyxJQUFULEVBQWU7QUFDekIsc0JBQU0sV0FBTjtBQUNEO0FBWE0sR0FERztBQWNaLGlCQUFlO0FBQ2IsV0FBTyxnQkFETTtBQUViLCtLQUZhO0FBSWIsVUFBTSxFQUFDLFVBQVUsQ0FBWCxFQUpPO0FBS2IsU0FBSywwRkFMUTtBQU1iLFlBQVEsZ0JBQVMsSUFBVCxFQUFlLElBQWYsRUFBcUI7QUFDM0I7QUFDRDtBQVJZO0FBZEgsQ0FBZDs7a0JBMEJlLEs7Ozs7Ozs7O0FDaENS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TUFBTCxDQUFZLE1BQXJJOztBQUVBLFdBQUksSUFBSSxJQUFJLGFBQVosRUFBMkIsSUFBSSxjQUEvQixFQUErQyxHQUEvQyxFQUFvRDtBQUNsRCxhQUFJLElBQUksSUFBSSxZQUFaLEVBQTBCLElBQUksZUFBOUIsRUFBK0MsR0FBL0MsRUFBb0Q7QUFDbEQsY0FBSSxPQUFPLGVBQUssT0FBTCxDQUFhLENBQWIsRUFBZ0IsQ0FBaEIsQ0FBWDtBQUNBLGNBQUcsSUFBSCxFQUFTO0FBQ1AsaUJBQUssT0FBTCxDQUFhLFNBQWIsQ0FBdUIsaUJBQU8sTUFBOUIsRUFBc0Msd0JBQXRDLEVBQXFELHdCQUFyRDtBQUNEO0FBQ0Y7QUFDRjs7QUFFRCxXQUFLLE9BQUwsQ0FBYSxPQUFiO0FBQ0Q7Ozs7OztrQkFHWSxROzs7Ozs7Ozs7OztJQ3JEVCxJLEdBQ0osY0FBWSxDQUFaLEVBQWUsQ0FBZixFQUFrQjtBQUFBOztBQUNoQixPQUFLLENBQUwsR0FBUyxDQUFUO0FBQ0EsT0FBSyxDQUFMLEdBQVMsQ0FBVDtBQUNBLE9BQUssSUFBTCxHQUFZLE9BQVo7QUFDRCxDOztrQkFHWSxJIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IENhcmRHYW1lIGZyb20gXCIuL2xpYi9jYXJkZ2FtZVwiO1xuIFxuaW1wb3J0IGF1ZGlvIGZyb20gXCIuL2xpYi9hdWRpb1wiO1xuXG5pbXBvcnQgQ2l0eSBmcm9tIFwiLi9saWIvY2l0eVwiO1xuXG5jb25zdCBDQVJEUyA9IHtcbiAgZ2F0aGVyMToge1xuICAgIHRpdGxlOiBcIkdhdGhlciBNYXRlcmlhbFwiLFxuICAgIGRlc2M6IFwiQWRkIGEgQnVpbGRpbmcgTWF0ZXJpYWwgdG8geW91ciBwb29sLlwiLFxuICAgIGNvc3Q6IHt9LFxuICAgIGltZzogXCJodHRwczovL2Nkbi5nbGl0Y2guY29tLzUwNDE3NDE3LTQyODItNDljOS1hYjQzLWI1NDQ4ZjlmMjk0NiUyRmxvZ3MuanBnPzE1MjQzNDgzNDEzODBcIixcbiAgICBvblBsYXk6IGZ1bmN0aW9uKGhhbmQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiZ2F0aGVyIVwiLCBDaXR5LCBDaXR5LnJlc291cmNlcywgQ2l0eS5yZXNvdXJjZXMubWF0ZXJpYWwpO1xuICAgICAgQ2l0eS5yZXNvdXJjZXMubWF0ZXJpYWwgKz0gMTtcbiAgICB9LFxuICAgIGJlZm9yZVBsYXk6IGZ1bmN0aW9uKGhhbmQpIHtcbiAgICAgIGF1ZGlvLmdldE1hdGVyaWFsKCk7XG4gICAgfSxcbiAgfSxcbiAgYnVpbGRXb3Jrc2hvcDoge1xuICAgIHRpdGxlOiBcIkJ1aWxkIFdvcmtzaG9wXCIsXG4gICAgZGVzYzogYEJ1aWxkcyBhIFdvcmtzaG9wLCBhIG5ldyBEZWNrIHRoYXQgd2lsbCBhdXRvbWF0aWNhbGx5IHBsYXkgaXRzZWxmIGF0IHRoZSBzdGFydCBvZiBlYWNoIHR1cm4uXG4gICAgICAgICAgIFRoaXMgY2FyZCB3aWxsIHJlbW92ZSBpdHNlbGYgZnJvbSB5b3VyIGRlY2sgYWZ0ZXIgcGxheWluZy5gLFxuICAgIGNvc3Q6IHttYXRlcmlhbDogM30sXG4gICAgaW1nOiBcImh0dHBzOi8vY2RuLmdsaXRjaC5jb20vNTA0MTc0MTctNDI4Mi00OWM5LWFiNDMtYjU0NDhmOWYyOTQ2JTJGd29ya3Nob3AuanBnPzE1MjQzNDgwNzQ1NzJcIixcbiAgICBvblBsYXk6IGZ1bmN0aW9uKGNpdHksIGhhbmQpIHtcbiAgICAgIC8vIGRvIHRoZSB0aGluZ1xuICAgIH0sXG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IENBUkRTOyIsImV4cG9ydCBjb25zdCBUSUxFX1NJWkUgPSA2NDtcbmV4cG9ydCBjb25zdCBDSVRZX1dJRFRIID0gMTI4O1xuZXhwb3J0IGNvbnN0IENJVFlfSEVJR0hUID0gMTI4OyIsImNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2l0eVwiKTtcblxuZnVuY3Rpb24gb25SZXNpemUoKSB7XG4gIGNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xufVxuXG5vblJlc2l6ZSgpO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBvblJlc2l6ZSk7XG5cbmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgZXZlbnQgPT4ge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICByZXR1cm4gZmFsc2U7XG59KTtcblxuaW1wb3J0IFJlbmRlcmVyIGZyb20gXCIuL2xpYi9yZW5kZXJlclwiO1xuaW1wb3J0IENpdHkgZnJvbSBcIi4vbGliL2NpdHlcIjtcbmltcG9ydCBDYXJkR2FtZSBmcm9tIFwiLi9saWIvY2FyZGdhbWVcIjtcbmltcG9ydCBDQVJEUyBmcm9tIFwiLi9jYXJkc1wiO1xuXG53aW5kb3cuZGVidWcgPSBDYXJkR2FtZTtcblxuY29uc3QgcmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIoY2FudmFzKTtcbkNhcmRHYW1lLnJlZ2lzdGVyR2xvYmFsRHJhZ0V2ZW50cygpO1xuXG5pbXBvcnQge1RJTEVfU0laRSwgQ0lUWV9XSURUSCwgQ0lUWV9IRUlHSFR9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuXG5yZW5kZXJlci5jYW1lcmEueCA9IFRJTEVfU0laRSAqIENJVFlfV0lEVEggLyAyO1xucmVuZGVyZXIuY2FtZXJhLnkgPSBUSUxFX1NJWkUgKiBDSVRZX0hFSUdIVCAvIDI7XG5cbmxldCBsYXN0VXBkYXRlVGltZSA9IG51bGw7XG5cbmZ1bmN0aW9uIHVwZGF0ZSh0aW1lc3RhbXApIHtcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZSk7XG4gIFxuICBpZihsYXN0VXBkYXRlVGltZSA9PT0gbnVsbCkge1xuICAgIGxhc3RVcGRhdGVUaW1lID0gdGltZXN0YW1wO1xuICB9XG4gIFxuICBjb25zdCBkdCA9IHRpbWVzdGFtcCAtIGxhc3RVcGRhdGVUaW1lO1xuICBcbiAgcmVuZGVyZXIudXBkYXRlKGR0KTtcbiAgXG4gIGxhc3RVcGRhdGVUaW1lID0gdGltZXN0YW1wO1xufVxuXG5DYXJkR2FtZS5jcmVhdGVBbmRBZGRDYXJkVG9IYW5kKENBUkRTLmdhdGhlcjEpO1xuQ2FyZEdhbWUuY3JlYXRlQW5kQWRkQ2FyZFRvSGFuZChDQVJEUy5nYXRoZXIxKTtcbkNhcmRHYW1lLmNyZWF0ZUFuZEFkZENhcmRUb0hhbmQoQ0FSRFMuZ2F0aGVyMSk7XG5DYXJkR2FtZS5jcmVhdGVBbmRBZGRDYXJkVG9IYW5kKENBUkRTLmJ1aWxkV29ya3Nob3ApO1xuXG5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlKTsiLCJjbGFzcyBBdWRpb0NvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNhcmRTb3VuZHMgPSB7fTtcbiAgICB0aGlzLnNwZWNpZmljU291bmRzID0ge307XG4gICAgXG4gICAgdGhpcy5jYXJkU291bmRzLmRyYXdDYXJkID0gdGhpcy5sb2FkQXVkaW8oXCJodHRwczovL2Nkbi5nbGl0Y2guY29tLzUwNDE3NDE3LTQyODItNDljOS1hYjQzLWI1NDQ4ZjlmMjk0NiUyRmRyYXclMjBjYXJkLndhdj8xNTI0MzM3MTYyMzkzXCIpO1xuICAgIHRoaXMuY2FyZFNvdW5kcy5wbGF5Q2FyZCA9IHRoaXMubG9hZEF1ZGlvKFwiaHR0cHM6Ly9jZG4uZ2xpdGNoLmNvbS81MDQxNzQxNy00MjgyLTQ5YzktYWI0My1iNTQ0OGY5ZjI5NDYlMkZjYXJkJTIwZnJvbSUyMGhhbmQlMjB0byUyMHBsYXkud2F2PzE1MjQzMzcxNTA2MjlcIik7XG4gICAgXG4gICAgdGhpcy5zcGVjaWZpY1NvdW5kcy5tYXRlcmlhbCA9IHRoaXMubG9hZEF1ZGlvKFwiaHR0cHM6Ly9jZG4uZ2xpdGNoLmNvbS81MDQxNzQxNy00MjgyLTQ5YzktYWI0My1iNTQ0OGY5ZjI5NDYlMkZidWlsZGluZyUyMG1hdGVyaWFsLndhdj8xNTI0MzUyNzY3NzU1XCIpO1xuICB9XG4gIGxvYWRBdWRpbyh1cmwpIHtcbiAgICBsZXQgYXVkaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIik7XG4gICAgYXVkaW8uc3JjID0gdXJsO1xuICAgIGF1ZGlvLnZvbHVtZSA9IDAuNTtcbiAgICByZXR1cm4gYXVkaW87XG4gIH1cbiAgcGxheUF1ZGlvRnJvbVN0YXJ0KGF1ZGlvKSB7XG4gICAgYXVkaW8uY3VycmVudFRpbWUgPSAwO1xuICAgIGF1ZGlvLnBsYXkoKTtcbiAgfVxuICBkcmF3Q2FyZCgpIHtcbiAgICB0aGlzLnBsYXlBdWRpb0Zyb21TdGFydCh0aGlzLmNhcmRTb3VuZHMuZHJhd0NhcmQpO1xuICB9XG4gIHBsYXlDYXJkKCkge1xuICAgIHRoaXMucGxheUF1ZGlvRnJvbVN0YXJ0KHRoaXMuY2FyZFNvdW5kcy5wbGF5Q2FyZCk7XG4gIH1cbiAgZ2V0TWF0ZXJpYWwoKSB7XG4gICAgdGhpcy5wbGF5QXVkaW9Gcm9tU3RhcnQodGhpcy5zcGVjaWZpY1NvdW5kcy5tYXRlcmlhbCk7XG4gIH1cbn1cblxubGV0IGF1ZGlvID0gbmV3IEF1ZGlvQ29udHJvbGxlcigpO1xuXG5leHBvcnQgZGVmYXVsdCBhdWRpbzsiLCJjbGFzcyBDYW1lcmEge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnggPSAwO1xuICAgIHRoaXMueSA9IDA7XG4gICAgdGhpcy5zY2FsZSA9IDE7XG4gIH1cbiAgXG4gIGdldCB3aWR0aCgpIHtcbiAgICByZXR1cm4gd2luZG93LmlubmVyV2lkdGggLyB0aGlzLnNjYWxlO1xuICB9XG4gIGdldCBoZWlnaHQoKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAvIHRoaXMuc2NhbGU7XG4gIH1cbiAgXG4gIHRyYW5zbGF0ZU1vdXNlUG9zaXRpb24oeCwgeSkge1xuICAgIGxldCB0cmFuc2xhdGVkID0ge3g6eCwgeTp5fTtcbiAgICBcbiAgICB0cmFuc2xhdGVkLnggPSAoeCAvIHRoaXMuc2NhbGUpIC0gKCh3aW5kb3cuaW5uZXJXaWR0aCAqIDAuNSkgLyB0aGlzLnNjYWxlKTtcbiAgICB0cmFuc2xhdGVkLnkgPSAoeSAvIHRoaXMuc2NhbGUpIC0gKCh3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjUpIC8gdGhpcy5zY2FsZSk7XG4gICAgXG4gICAgdHJhbnNsYXRlZC54ICs9IHRoaXMueDtcbiAgICB0cmFuc2xhdGVkLnkgKz0gdGhpcy55O1xuICAgIFxuICAgIHJldHVybiB0cmFuc2xhdGVkXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FtZXJhOyIsImNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FyZFRlbXBsYXRlXCIpO1xuXG5sZXQgY2FyZEJlaW5nRHJhZ2dlZCA9IG51bGw7XG5sZXQgZHJhZ09mZnNldFggPSBudWxsO1xubGV0IGRyYWdPZmZzZXRZID0gbnVsbDtcbmxldCBkcmFnU3RhcnRYID0gbnVsbDtcbmxldCBkcmFnU3RhcnRZID0gbnVsbDtcblxuaW1wb3J0IEhhbmQgZnJvbSBcIi4vaGFuZFwiO1xuaW1wb3J0IENpdHkgZnJvbSBcIi4vY2l0eVwiO1xuaW1wb3J0IGF1ZGlvIGZyb20gXCIuL2F1ZGlvXCI7XG5cbmNvbnN0IGhhbmQgPSBuZXcgSGFuZChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhhbmRcIikpO1xuXG5jbGFzcyBDYXJkR2FtZSB7XG4gIHN0YXRpYyBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gICAgbGV0IGNhcmQgPSBkb2N1bWVudC5pbXBvcnROb2RlKGNhcmRUZW1wbGF0ZS5jb250ZW50LCB0cnVlKTtcbiAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCJoMVwiKS5pbm5lckhUTUwgPSBjYXJkRGF0YS50aXRsZTtcbiAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCJwXCIpLmlubmVySFRNTCA9IGNhcmREYXRhLmRlc2MucmVwbGFjZSgvXFxuL2csIFwiPGJyPlwiKTtcbiAgICBmb3IobGV0IGtleSBpbiBjYXJkRGF0YS5jb3N0KSB7XG4gICAgICBsZXQgY29zdFNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgIGNvc3RTcGFuLmNsYXNzTmFtZSA9IGBjb3N0ICR7a2V5fWA7XG4gICAgICBjb3N0U3Bhbi5pbm5lckhUTUwgPSBjYXJkRGF0YS5jb3N0W2tleV07XG4gICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY29zdHNcIikuYXBwZW5kQ2hpbGQoY29zdFNwYW4pO1xuICAgIH1cbiAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCJpbWdcIikuc3JjID0gY2FyZERhdGEuaW1nO1xuXG4gICAgbGV0IGNhcmRFbGVtZW50ID0gY2FyZC5xdWVyeVNlbGVjdG9yKFwiY2FyZFwiKTtcbiAgICBjYXJkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICBjYXJkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGV2ZW50ID0+IHtcbiAgICAgIGlmKGNhcmRCZWluZ0RyYWdnZWQgJiYgZXZlbnQud2hpY2ggIT09IDEpIHtcbiAgICAgICAgY2FyZEJlaW5nRHJhZ2dlZC5zdHlsZS50cmFuc2Zvcm0gPSBcIlwiO1xuICAgICAgICBkZWxldGUoY2FyZEJlaW5nRHJhZ2dlZC5kYXRhc2V0LmRyb3BwYWJsZSk7XG4gICAgICAgIGNhcmRCZWluZ0RyYWdnZWQgPSBudWxsO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCByZWN0ID0gY2FyZEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCBvZmZzZXRYID0gZXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdDtcbiAgICAgIGNvbnN0IG9mZnNldFkgPSBldmVudC5jbGllbnRZIC0gcmVjdC50b3A7XG5cbiAgICAgIGNhcmRCZWluZ0RyYWdnZWQgPSBjYXJkRWxlbWVudDtcbiAgICAgIGRyYWdPZmZzZXRYID0gb2Zmc2V0WDtcbiAgICAgIGRyYWdPZmZzZXRZID0gb2Zmc2V0WTtcblxuICAgICAgZHJhZ1N0YXJ0WCA9IGV2ZW50LmNsaWVudFg7XG4gICAgICBkcmFnU3RhcnRZID0gZXZlbnQuY2xpZW50WTtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICBjYXJkRWxlbWVudC5jYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYoY2FyZERhdGEub25QbGF5KSB7XG4gICAgICAgIGNhcmREYXRhLm9uUGxheShoYW5kKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIGNhcmRFbGVtZW50LmJlZm9yZVBsYXlDYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYoY2FyZERhdGEuYmVmb3JlUGxheSkge1xuICAgICAgICBjYXJkRGF0YS5iZWZvcmVQbGF5KGhhbmQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gY2FyZDtcbiAgfVxuICBzdGF0aWMgYXN5bmMgY3JlYXRlQW5kQWRkQ2FyZFRvSGFuZChjYXJkRGF0YSkge1xuICAgIGxldCBjYXJkID0gdGhpcy5jcmVhdGVDYXJkKGNhcmREYXRhKTtcbiAgICByZXR1cm4gdGhpcy5oYW5kLmFkZENhcmQoY2FyZCk7XG4gIH1cbiAgc3RhdGljIHJlZ2lzdGVyR2xvYmFsRHJhZ0V2ZW50cygpIHtcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZXZlbnQgPT4ge1xuICAgICAgaWYoIWNhcmRCZWluZ0RyYWdnZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVjdCA9IGRvY3VtZW50LmJvZHkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCBvZmZzZXRYID0gZXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdDtcbiAgICAgIGNvbnN0IG9mZnNldFkgPSBldmVudC5jbGllbnRZIC0gcmVjdC50b3A7XG5cbiAgICAgIGxldCBkeCA9IG9mZnNldFggLSBkcmFnU3RhcnRYO1xuICAgICAgbGV0IGR5ID0gb2Zmc2V0WSAtIGRyYWdTdGFydFk7XG5cbiAgICAgIGxldCBkaXN0YW5jZSA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG5cbiAgICAgIGlmKGRpc3RhbmNlID4gY2FyZEJlaW5nRHJhZ2dlZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLyAzKSB7XG4gICAgICAgIGNhcmRCZWluZ0RyYWdnZWQuZGF0YXNldC5kcm9wcGFibGUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGRlbGV0ZShjYXJkQmVpbmdEcmFnZ2VkLmRhdGFzZXQuZHJvcHBhYmxlKTtcbiAgICAgIH1cblxuICAgICAgY2FyZEJlaW5nRHJhZ2dlZC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7b2Zmc2V0WCAtIGRyYWdTdGFydFh9cHgsICR7b2Zmc2V0WSAtIGRyYWdTdGFydFl9cHgpYDtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGV2ZW50ID0+IHtcbiAgICAgIGlmKGNhcmRCZWluZ0RyYWdnZWQpIHtcbiAgICAgICAgaWYoY2FyZEJlaW5nRHJhZ2dlZC5kYXRhc2V0LmRyb3BwYWJsZSkge1xuICAgICAgICAgIHRoaXMucGxheUNhcmQoY2FyZEJlaW5nRHJhZ2dlZCwgZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY2FyZEJlaW5nRHJhZ2dlZC5zdHlsZS50cmFuc2Zvcm0gPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZShjYXJkQmVpbmdEcmFnZ2VkLmRhdGFzZXQuZHJvcHBhYmxlKTtcbiAgICAgICAgY2FyZEJlaW5nRHJhZ2dlZCA9IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgXG4gIHN0YXRpYyBwbGF5Q2FyZChjYXJkLCBtb3VzZVgsIG1vdXNlWSkge1xuICAgIGNhcmQuYmVmb3JlUGxheUNhbGxiYWNrKCk7XG4gICAgbGV0IHBvc2l0aW9uID0gY2FyZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBoYW5kLnJlbW92ZUNhcmQoY2FyZCk7XG4gICAgY2FyZC5jbGFzc0xpc3QuYWRkKFwicGxheUFuaW1cIik7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYXJkKTtcbiAgICBjYXJkLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHttb3VzZVggLSBkcmFnT2Zmc2V0WH1weCwgJHttb3VzZVkgLSBkcmFnT2Zmc2V0WX1weClgO1xuICAgIGF1ZGlvLnBsYXlDYXJkKCk7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoY2FyZCk7XG4gICAgICBjYXJkLmNhbGxiYWNrKCk7XG4gICAgfSwgNDAwKTtcbiAgfVxufVxuXG5DYXJkR2FtZS5oYW5kID0gaGFuZDtcblxuZXhwb3J0IGRlZmF1bHQgQ2FyZEdhbWU7IiwiaW1wb3J0IFRpbGUgZnJvbSBcIi4vdGlsZVwiO1xuaW1wb3J0IHtDSVRZX1dJRFRILCBDSVRZX0hFSUdIVH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuXG5jbGFzcyBDaXR5IHtcbiAgc3RhdGljIGdldFRpbGUoeCwgeSkge1xuICAgIGlmKHggPCAwIHx8IHkgPCAwIHx8IHggPj0gdGhpcy50aWxlcy5sZW5ndGggfHwgeSA+PSB0aGlzLnRpbGVzWzBdLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRpbGVzW3hdW3ldO1xuICB9XG59XG5cbkNpdHkudGlsZXMgPSBbXTtcbmZvcihsZXQgeCA9IDA7IHggPCBDSVRZX1dJRFRIOyB4KyspIHtcbiAgQ2l0eS50aWxlc1t4XSA9IFtdO1xuICBmb3IobGV0IHkgPSAwOyB5IDwgQ0lUWV9IRUlHSFQ7IHkrKykge1xuICAgIENpdHkudGlsZXNbeF1beV0gPSBuZXcgVGlsZSh4LCB5KTtcbiAgfVxufVxuXG5jbGFzcyBSZXNvdXJjZXMge1xuICBzdGF0aWMgZ2V0IG1hdGVyaWFscygpIHtcbiAgICBjb25zb2xlLmxvZyhcImdldHRlciBvbiBtYXRlcmlhbHNcIiwgdGhpcy5fbWF0ZXJpYWxzKTtcbiAgICByZXR1cm4gdGhpcy5fbWF0ZXJpYWxzO1xuICB9XG4gIHN0YXRpYyBzZXQgbWF0ZXJpYWxzKG5ld1ZhbHVlKSB7XG4gICAgY29uc29sZS5sb2coXCJzZXR0ZXIgb24gbWF0ZXJpYWxzXCIsIHRoaXMuX21hdGVyaWFscywgbmV3VmFsdWUpO1xuICAgIHRoaXMuX21hdGVyaWFscyA9IG5ld1ZhbHVlO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWF0ZXJpYWxzXCIpLmlubmVySFRNTCA9IG5ld1ZhbHVlO1xuICB9XG4gIHN0YXRpYyBnZXQgaW5mcmFzdHJ1Y3R1cmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2luZnJhc3RydWN0dXJlO1xuICB9XG4gIHN0YXRpYyBzZXQgaW5mcmFzdHJ1Y3R1cmUobmV3VmFsdWUpIHtcbiAgICB0aGlzLl9pbmZyYXN0cnVjdHVyZSA9IG5ld1ZhbHVlO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5mcmFzdHJ1Y3R1cmVcIikuaW5uZXJIVE1MID0gbmV3VmFsdWU7XG4gIH1cbiAgc3RhdGljIGdldCBsYWJvdXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xhYm91cjtcbiAgfVxuICBzdGF0aWMgc2V0IGxhYm91cihuZXdWYWx1ZSkge1xuICAgIHRoaXMuX2xhYm91ciA9IG5ld1ZhbHVlO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGFib3VyXCIpLmlubmVySFRNTCA9IG5ld1ZhbHVlO1xuICB9XG4gIHN0YXRpYyBnZXQga25vd2xlZGdlKCkge1xuICAgIHJldHVybiB0aGlzLl9rbm93bGVkZ2U7XG4gIH1cbiAgc3RhdGljIHNldCBrbm93bGVkZ2UobmV3VmFsdWUpIHtcbiAgICB0aGlzLl9rbm93bGVkZ2UgPSBuZXdWYWx1ZTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImtub3dsZWRnZVwiKS5pbm5lckhUTUwgPSBuZXdWYWx1ZTtcbiAgfVxuICBzdGF0aWMgZ2V0IGZvb2QoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Zvb2Q7XG4gIH1cbiAgc3RhdGljIHNldCBmb29kKG5ld1ZhbHVlKSB7XG4gICAgdGhpcy5fZm9vZCA9IG5ld1ZhbHVlO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9vZFwiKS5pbm5lckhUTUwgPSBuZXdWYWx1ZTtcbiAgfVxufVxuXG5SZXNvdXJjZXMubWF0ZXJpYWxzID0gMDtcblJlc291cmNlcy5pbmZyYXN0cnVjdHVyZSA9IDA7XG5SZXNvdXJjZXMubGFib3VyID0gMDtcblJlc291cmNlcy5rbm93bGVkZ2UgPSAwO1xuUmVzb3VyY2VzLmZvb2QgPSAwO1xuXG5DaXR5LnJlc291cmNlcyA9IFJlc291cmNlcztcblxud2luZG93LnRlc3RDaXR5ID0gQ2l0eTtcblxuZXhwb3J0IGRlZmF1bHQgQ2l0eTsiLCJjb25zdCBoYW5kRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGFuZFwiKTtcblxuaW1wb3J0IGF1ZGlvIGZyb20gXCIuL2F1ZGlvXCI7XG5cbmNsYXNzIEhhbmQge1xuICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICB0aGlzLmZpcnN0Q2FyZCA9IG51bGw7XG4gIH1cbiAgXG4gIGFzeW5jIGFkZENhcmQoY2FyZCkge1xuICAgIGxldCBjYXJkRWxlbSA9IGNhcmQucXVlcnlTZWxlY3RvcihcImNhcmRcIik7XG4gICAgXG4gICAgaWYoIXRoaXMuZmlyc3RDYXJkKSB7XG4gICAgICB0aGlzLmZpcnN0Q2FyZCA9IGNhcmRFbGVtO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkKTtcbiAgICBcbiAgICBsZXQgYW1vdW50T2ZDYXJkc0luSGFuZCA9IGhhbmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJjYXJkXCIpLmxlbmd0aDtcbiAgICB0aGlzLmNvbnRhaW5lci5kYXRhc2V0LmNhcmRjb3VudCA9IGFtb3VudE9mQ2FyZHNJbkhhbmQ7XG4gICAgaWYoYW1vdW50T2ZDYXJkc0luSGFuZCA+IDYpIHtcbiAgICAgIHRoaXMuYnVybkZpcnN0Q2FyZCgpO1xuICAgIH1cbiAgICBcbiAgICBhdWRpby5kcmF3Q2FyZCgpO1xuICAgIFxuICAgIGNhcmRFbGVtLmNsYXNzTGlzdC5hZGQoXCJlbnRlckhhbmRBbmltXCIpO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY2FyZEVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZihldmVudC5hbmltYXRpb25OYW1lID09PSBcImFkZENhcmRUb0hhbmRBbmltYXRpb25cIikge1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgY2FyZEVsZW0uY2xhc3NMaXN0LnJlbW92ZShcImVudGVySGFuZEFuaW1cIik7XG4gICAgXG4gIH1cbiAgXG4gIGFzeW5jIGJ1cm5GaXJzdENhcmQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYnVybkNhcmQodGhpcy5maXJzdENhcmQpO1xuICB9XG4gIFxuICBmaW5kTmV3Rmlyc3RDYXJkKCkge1xuICAgIHRoaXMuZmlyc3RDYXJkID0gbnVsbDtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5jb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBwb3NzaWJsZSA9IHRoaXMuY29udGFpbmVyLmNoaWxkcmVuW2ldO1xuICAgICAgaWYocG9zc2libGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYnVybkNhcmRBbmltXCIpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5maXJzdENhcmQgPSBwb3NzaWJsZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBcbiAgYXN5bmMgYnVybkNhcmQoY2FyZCkge1xuICAgIGNhcmQuY2xhc3NMaXN0LmFkZChcImJ1cm5DYXJkQW5pbVwiKTtcbiAgICBpZih0aGlzLmZpcnN0Q2FyZCA9PT0gY2FyZCkge1xuICAgICAgdGhpcy5maW5kTmV3Rmlyc3RDYXJkKCk7XG4gICAgfVxuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGlmKGV2ZW50LmFuaW1hdGlvbk5hbWUgPT09IFwiYnVybkNhcmRBbmltYXRpb25cIikge1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKFwiYnVybkNhcmRBbmltXCIpO1xuICAgIHJldHVybiB0aGlzLnJlbW92ZUNhcmQoY2FyZCk7XG4gIH1cblxuICByZW1vdmVDYXJkKGNhcmQpIHtcbiAgICBpZih0aGlzLmZpcnN0Q2FyZCA9PT0gY2FyZCkge1xuICAgICAgdGhpcy5maW5kTmV3Rmlyc3RDYXJkKCk7XG4gICAgfVxuICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNoaWxkKGNhcmQpO1xuICAgIGNvbnN0IGFtb3VudE9mQ2FyZHNJbkhhbmQgPSBoYW5kRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiY2FyZFwiKS5sZW5ndGg7XG4gICAgdGhpcy5jb250YWluZXIuZGF0YXNldC5jYXJkY291bnQgPSBhbW91bnRPZkNhcmRzSW5IYW5kO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEhhbmQ7IiwiZnVuY3Rpb24gbG9hZEltYWdlKHNyYykge1xuICBsZXQgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgaW1hZ2Uuc3JjID0gc3JjO1xuICByZXR1cm4gaW1hZ2U7XG59XG5jb25zdCBJTUFHRVMgPSB7XG4gIFNBTkQxOiBuZXcgbG9hZEltYWdlKFwiaHR0cHM6Ly9jZG4uZ2xpdGNoLmNvbS81MDQxNzQxNy00MjgyLTQ5YzktYWI0My1iNTQ0OGY5ZjI5NDYlMkZ0aWxlU2FuZDEucG5nPzE1MjQyNzkxMzY1OTRcIiksXG4gIFNBTkQyOiBuZXcgbG9hZEltYWdlKFwiaHR0cHM6Ly9jZG4uZ2xpdGNoLmNvbS81MDQxNzQxNy00MjgyLTQ5YzktYWI0My1iNTQ0OGY5ZjI5NDYlMkZ0aWxlU2FuZDIucG5nPzE1MjQyNzkxMzY4MjRcIiksXG4gIEdSQVNTMTogbmV3IGxvYWRJbWFnZShcImh0dHBzOi8vY2RuLmdsaXRjaC5jb20vNTA0MTc0MTctNDI4Mi00OWM5LWFiNDMtYjU0NDhmOWYyOTQ2JTJGdGlsZUdyYXNzMS5wbmc/MTUyNDI3OTMzOTMxN1wiKSxcbiAgR1JBU1MyOiBuZXcgbG9hZEltYWdlKFwiaHR0cHM6Ly9jZG4uZ2xpdGNoLmNvbS81MDQxNzQxNy00MjgyLTQ5YzktYWI0My1iNTQ0OGY5ZjI5NDYlMkZ0aWxlR3Jhc3MyLnBuZz8xNTI0Mjc5MTM2Mzg4XCIpLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgSU1BR0VTOyIsImltcG9ydCBDYW1lcmEgZnJvbSAnLi9jYW1lcmEnO1xuaW1wb3J0IENpdHkgZnJvbSBcIi4vY2l0eVwiO1xuXG5pbXBvcnQge1RJTEVfU0laRX0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuXG5pbXBvcnQgSW1hZ2VzIGZyb20gXCIuL2ltYWdlc1wiO1xuXG5jbGFzcyBSZW5kZXJlciB7XG4gIGNvbnN0cnVjdG9yKGNhbnZhcykge1xuICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICAgIHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICB0aGlzLmNvbnRleHQuaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG4gICAgdGhpcy5jb250ZXh0Lm1vekltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMuY29udGV4dC53ZWJraXRJbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNvbnRleHQubXNJbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNvbnRleHQuaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG4gICAgdGhpcy5jYW1lcmEgPSBuZXcgQ2FtZXJhKCk7XG4gIH1cbiAgXG4gIHVwZGF0ZShkdCkge1xuICAgIHRoaXMuY29udGV4dC5zYXZlKCk7XG4gICAgXG4gICAgdGhpcy5jb250ZXh0LnRyYW5zbGF0ZSh0aGlzLmNhbnZhcy53aWR0aCAvIDIgLSB0aGlzLmNhbWVyYS54ICogdGhpcy5jYW1lcmEuc2NhbGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgLyAyIC0gdGhpcy5jYW1lcmEueSAqIHRoaXMuY2FtZXJhLnNjYWxlKTtcbiAgICB0aGlzLmNvbnRleHQuc2NhbGUodGhpcy5jYW1lcmEuc2NhbGUsIHRoaXMuY2FtZXJhLnNjYWxlKTtcbiAgICBcbiAgICBsZXQgbGVmdEJvdW5kID0gdGhpcy5jYW1lcmEueCAtIHRoaXMuY2FtZXJhLndpZHRoIC8gMjtcbiAgICBsZXQgcmlnaHRCb3VuZCA9IHRoaXMuY2FtZXJhLnggKyB0aGlzLmNhbWVyYS53aWR0aCAvIDI7XG4gICAgXG4gICAgbGV0IHRvcEJvdW5kID0gdGhpcy5jYW1lcmEueSAtIHRoaXMuY2FtZXJhLmhlaWdodCAvIDI7XG4gICAgbGV0IGJvdHRvbUJvdW5kID0gdGhpcy5jYW1lcmEueSArIHRoaXMuY2FtZXJhLmhlaWdodCAvIDI7XG4gICAgXG4gICAgbGV0IGxlZnRDaXR5Qm91bmQgPSBNYXRoLmZsb29yKGxlZnRCb3VuZCAvIFRJTEVfU0laRSk7XG4gICAgbGV0IHJpZ2h0Q2l0eUJvdW5kID0gTWF0aC5jZWlsKHJpZ2h0Qm91bmQgLyBUSUxFX1NJWkUpO1xuICAgIFxuICAgIGxldCB0b3BDaXR5Qm91bmQgPSBNYXRoLmZsb29yKHRvcEJvdW5kIC8gVElMRV9TSVpFKTtcbiAgICBsZXQgYm90dG9tQ2l0eUJvdW5kID0gTWF0aC5jZWlsKGJvdHRvbUJvdW5kIC8gVElMRV9TSVpFKTtcbiAgICBcbiAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KHRoaXMuY2FtZXJhLnggLSB0aGlzLmNhbWVyYS53aWR0aCAvIDIsIHRoaXMuY2FtZXJhLnkgLSB0aGlzLmNhbWVyYS5oZWlnaHQgLyAyLCB0aGlzLmNhbWVyYS53aWR0aCwgdGhpcy5jYW1lcmEuaGVpZ2h0KTtcbiAgICBcbiAgICBmb3IobGV0IHggPSBsZWZ0Q2l0eUJvdW5kOyB4IDwgcmlnaHRDaXR5Qm91bmQ7IHgrKykge1xuICAgICAgZm9yKGxldCB5ID0gdG9wQ2l0eUJvdW5kOyB5IDwgYm90dG9tQ2l0eUJvdW5kOyB5KyspIHtcbiAgICAgICAgbGV0IHRpbGUgPSBDaXR5LmdldFRpbGUoeCwgeSk7XG4gICAgICAgIGlmKHRpbGUpIHtcbiAgICAgICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKEltYWdlcy5HUkFTUzEsIHggKiBUSUxFX1NJWkUsIHkgKiBUSUxFX1NJWkUsIFRJTEVfU0laRSwgVElMRV9TSVpFKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmNvbnRleHQucmVzdG9yZSgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJlbmRlcmVyOyIsImNsYXNzIFRpbGUge1xuICBjb25zdHJ1Y3Rvcih4LCB5KSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMudHlwZSA9IFwiZ3Jhc3NcIjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUaWxlOyJdfQ=="}